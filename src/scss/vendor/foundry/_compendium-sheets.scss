// Styling for Nimble Compendium Sheets (opened from compendia)
.system-nimble {
  .application.sheet.nimble-sheet {
    // Make the main body section fill available height
    .nimble-sheet__body,
    .nimble-sheet__body--item {
      display: flex;
      flex-direction: column;
      height: 100%;
      overflow: hidden;

      // Section header should not grow
      .nimble-section-header,
      .nimble-sheet-section-header {
        flex-shrink: 0;
      }

      // Make the prose-mirror editor expand to fill available space
      prose-mirror {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 0;
        overflow: hidden;

        .editor-content {
          flex: 1;
          overflow-y: auto;
          padding: 0.5rem;
        }

        .editor-container {
          flex: 1;
          display: flex;
          flex-direction: column;
          min-height: 0;
        }

        // Keep the toggle button at the bottom
        button.toggle {
          flex-shrink: 0;
        }
      }
    }

    // Allow NPC sheets to scroll through features
    .nimble-sheet__body.nimble-sheet__body--npc {
      overflow-y: auto;
    }

    // Allow item sheets to scroll through content
    .nimble-sheet__body.nimble-sheet__body--item {
      overflow-y: auto;
    }

    // Allow the nested body section with player-character class (used in NPC sheets) to scroll
    .nimble-sheet__body--npc .nimble-sheet__body.nimble-sheet__body--player-character {
      overflow-y: auto;
    }

    // Special handling for description tab content
    .nimble-description-tab-content {
      display: flex;
      flex-direction: column;
      height: 100%;
      overflow: hidden;

      prose-mirror {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 0;

        .editor-content {
          flex: 1;
          overflow-y: auto;
          padding: 0.5rem;
        }
      }
    }
  }
}
